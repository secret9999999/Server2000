From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Owen1212055 <23108066+Owen1212055@users.noreply.github.com>
Date: Thu, 6 Apr 2023 21:11:09 -0400
Subject: [PATCH] Add Exact No Damage Ticks API


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java
index aec588b41f19b2147a4e7267bafa417fbcf7abc0..cb24bfc70c7e004cc951f8c056a12a2dfc8fd941 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java
@@ -418,6 +418,17 @@ public class CraftLivingEntity extends CraftEntity implements LivingEntity {
     public void setNoDamageTicks(int ticks) {
         this.getHandle().invulnerableTime = ticks;
     }
+    // Paper start
+    @Override
+    public int getExactNoDamageTicks() {
+        return Math.max(0, this.getNoDamageTicks() - (this.getMaximumNoDamageTicks() / 2));
+    }
+
+    @Override
+    public void setExactNoDamageTicks(int ticks) {
+        this.setNoDamageTicks(ticks + (this.getMaximumNoDamageTicks() / 2));
+    }
+    // Paper end
 
     @Override
     public net.minecraft.world.entity.LivingEntity getHandle() {
